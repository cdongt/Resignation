---
cssclasses: grid-bg
创建时间: 2025-08-05 18:04
最新更新时间: 2025-12-11 14:11
project: 费用识别-物流部
tags: 
---



## 优化方向
### V7版本
1. 添加发票识别：[20251209-发票识别](20251209-发票识别.md)

### V6版本
1. 增加自动更新机制：用户打开软件会先检查服务器端是否有版本，有的话自动更新
2. 日志：
    - 错误日志.log 错误显示：“提交至OA数据库失败”
    - 错误日志.log 添加设备id
    - 上传文件.log 添加emoji：📁
2. 编辑页面：
    - 新加一行，会添加到最后
    - 新加1行，会导致splitid错误
3. 提示词更新：
    - 更新表格布局识别提示词
    - 更新提取json提示词(对外销合同的识别更准确)
4. 去重逻辑更改：引入hash_id
5. excel的日期类型处理
6. 异步提取json按顺序排列
7. xlwings格式化错误——加线条，列宽调整


#### 提示词变化

1. 提取成json提示词学习了之前的外销发票号经验数据
2. 布局识别：优化了布局2误判成布局1的情况，优化布局1误判成布局2的情况

### V5版本
 1. 根据每笔报销合同的费用，动态计算出合计
     1. 识别后，根据识别的费用计算
     2. 用户修改费用金额的时候，更新合计
 2. 日志：
     - 添加文件数量说明
     - 编辑步骤的log
 3. CTRL+V 粘贴图片
 4. excel文件删除多余的行和列
 5. 弹框提示


 

### V4.5 版本
1. 日志修改：
    1. 人名和设备绑定
    2. 添加 编辑.log
2. excel文件删除多余的行和列
3. CTRL+V 截图


### V4版本
 1. 3种EXCEL布局兼容
 2. 根据文件名字提取外销合同号
 3. 日志问题
     1. 加入更详细的操作日志
     2. 具体数量说明：
         1. 上传了多少个文件
         2. 识别了多少个外销合同号
         3. 识别了多少条费用
         4. 上传了多少个外销合同号、多少条费用
 4. oss：上传文件和日志文件的存放路径
 5. CTRL + V
 6. 返回给用户的提示带有指导性


V4 版本更新内容：
费用识别软件：
1. EXCEL兼容性大幅提升：针对 Excel 文件的 3 种常见布局完成适配优化，文件识别准确度较此前提升至少50%
2. 外销合同号智能提取：从文件名中自动提取外销合同号的功能
3. 图片上传更便捷：支持复制粘贴上传图片，用户截图后通过 Ctrl+V 即可快速完成上传，省去手动保存、选择文件的繁琐步骤。
4. 弹窗提示优化：优化部分功能的弹窗提示文案，替换原有模糊提示内容，提供更具指导性、可直接落地的操作指引，减少用户操作困惑。

OA：
1. 添加出运日期，自动匹配畅想的出运日期

---

文件命名的规范要求：
1. 文件里有 **多个** 外销合同号，文件命名时千万不要写外销合同号，否则会导致错误替换掉AI自动提取的多个外销合同号
2. 只包含单个外销合同号文件的命名规范：外销合同号_其他备注文字。
    1. 外销合同要放到最前面
    2. 外销合同号右边用下划线`_`隔开
    3. 举例：N25MU5001_浙江中外运有限公司宁波物流分公司费用单




## 问题记录
### 现有问题
1. 中英文混杂的单子会有问题






