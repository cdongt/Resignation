---
cssclasses: grid-bg
创建时间: 2025-11-21 17:16
最新更新时间: 2025-12-10 17:57
---

## 判断依据
以下情况可视为重复：
- 同一个外销合同号
- 同一个船代公司
- 同一个费用名称
- 同一个货币代码
- 同一个费用金额
- 同一个备注



## 逻辑判断方法

> [!summary]+ 利用2个ID
> 1. 根据`hash_id`判断是否重复
> 2. 将`uuid_币种`作为`split_id`，对接OA接口
>

### hash_id 的生成逻辑
1. 每条费用信息：外销发票号+币别+费用名称+费用金额+备注 一起哈希
   ![|1000](https://vscode-picgo.oss-cn-shanghai.aliyuncs.com/obsidian/20251127115249891.png)







## 前端展示信息
### 情况一：提交无重复情况
#### 前端显示：

```
📊 合计成功提交 X 个 外销合同，Y 条费用信息：

✅ 外销合同号为25RD10012，币别为CNY的票上传OA成功。
✅ 外销合同号为25RD10012，币别为CNY的票上传OA成功。
✅ 外销合同号为25RD10012，币别为CNY的票上传OA成功。
✅ 外销合同号为25RD10012，币别为CNY的票上传OA成功。
```




### 情况二：提交有重复情况

#### 前端显示

```
📊 合计成功提交 X 个 外销合同，Y 条费用信息。 失败提交 A 个 外销合同，B 条费用信息。

❌ A 个外销合同， B 条费用信息提交失败，错误信息如下：

    1. 外销合同号：123456   币种： CNY
        港杂费：100  🔁 重复提交
        拖车费：200  🔁 重复提交
        
    2. 外销合同号：234567   币种： USD
        港杂费：100  🔁 重复提交
        拖车费：200  🔁 重复提交

```


